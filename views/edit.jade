extends layout

block content
  h1= title
  p Welcome to #{title}
  div(class='container')
    div(class='row' style='margin-bottom:50px')
      div(class='col-sm-2')
        a(class='btn btn-primary' href="/users") Back to list
      if (data.id)
        div(class='col-sm-2 col-sm-offset-8')
          form(action='/users/#{data.id}/delete' method="post"  id='delete_form_#{data.id}')
            input(type='button' class='btn btn-danger' value="Delete" data-toggle="modal" data-target='#deleteConfirm' data-rowid="#{data.id}" data-name="#{data.name}")
  
    form(method='post' action='/users/#{undefined == data.id ? "" : data.id}' class='form-horizontal')
      div(class='form-group')
        label(for='name' class="col-sm-2 control-label") Name
        div(class="col-sm-3")
          input(id='name' name='name' class="form-control" value='#{undefined == data.name ? "" : data.name}' required)
        label(for='join_date' class="col-sm-2 control-label") Join Date
        div(class="col-sm-3")
          input(id='join_date' name='join_date' class="form-control" type='date' value='#{undefined == data.join_date ? "" : data.join_date}')
      div(class='form-group')
        label(for='image_url' class="col-sm-2 control-label") Image
        div(class="col-sm-10")
          input(id='image_url' name='image_url' class="form-control" placeholder='http://' value='#{undefined == data.image_url ? "" : data.image_url}' type="url" required)
      div(class='form-group')
        label(for='intro' class="col-sm-2 control-label") Intro
        div(class="col-sm-10")
          input(id='intro' name="intro" class="form-control" value='#{undefined == data.intro ? "" : data.intro}' required)
      div(class='form-group')
        label(for='weibo_url' class="col-sm-2 control-label") Weibo
        div(class="col-sm-10")
          //- div(class="input-group")
          //-   span(class="input-group-addon") @
          input(id='weibo_url' name='weibo_url' class="form-control" placeholder='http://' value='#{undefined == data.weibo_url ? "" : data.weibo_url}' type="url" required)
      div(class='form-group')
        label(for='weibo_snippet' class="col-sm-2 control-label") Weibo Snippet
        div(class="col-sm-10")
          textarea(id='weibo_snippet' name='weibo_snippet' class="form-control" placeholder='...')=data.weibo_snippet
      div(class='form-group')
        div(class="col-sm-offset-2 col-sm-10")
          button(type='submit' class="btn btn-default") Button
    div(class='modal fade in' tabindex='-1' role='dialog' aria-labelledby="AABBCC" id='deleteConfirm')
      div(class='modal-dialog modal-sm')
        div(class='modal-content')
          div(class='modal-header')
            button(class='close' data-dismiss='modal' aria-label='Close')
              span(aria-hidden='true') &times;
            h4 Title
          div(class='modal-body')
            span(class='remove_text') Do you want to delete #{data.name}?
            span(class='rowId')
          div(class='modal-footer')
            button(class='btn btn-default' data-dismiss='modal') Cancel
            button(class='btn btn-danger' id='delete-button' data-rowid="#{data.id}") Yes, Delete
    script(type='text/javascript').
      $('#delete-button').click(function() {
        var theId = $(this).data("rowid")
        $('#delete_form_' + theId).submit()
      })
